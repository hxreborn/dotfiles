# =========================
# Hyprdots-like keybindings
# SUPER → lalt
# =========================

# --- Window management ---
lalt - q: yabai -m window --close
lalt - f4: yabai -m window --close
lalt - w: yabai -m window --toggle float
lalt - g: bash -lc 'idx=$(yabai -m query --windows --window | jq -r ".stack.index"); if [ "$idx" = "0" ] || [ "$idx" = "null" ]; then east=$(yabai -m query --windows --window east | jq -r .id); [ "$east" != "null" ] && yabai -m window --stack "$east"; else yabai -m window --unstack; fi'
shift - f11: yabai -m window --toggle zoom-fullscreen
lalt + shift - f: yabai -m window --toggle sticky
ctrl + lalt - r: sketchybar --reload 2>/dev/null || :; brew services restart yabai >/dev/null
lalt - j: yabai -m window --toggle split

# --- Focus (SUPER+arrows) ---
lalt - left: yabai -m window --focus west
lalt - right: yabai -m window --focus east
lalt - up: yabai -m window --focus north
lalt - down: yabai -m window --focus south
lalt - tab: yabai -m window --focus next
lalt + shift - tab: yabai -m window --focus prev

# --- Resize (SUPER+SHIFT+arrows) ---
lalt + shift - left: yabai -m window --resize left:-40:0
lalt + shift - right: yabai -m window --resize right:40:0
lalt + shift - up: yabai -m window --resize top:0:-40
lalt + shift - down: yabai -m window --resize bottom:0:40

# --- Move/Swap (SUPER+CTRL+SHIFT+arrows) ---
lalt + ctrl + shift - left: yabai -m window --swap west
lalt + ctrl + shift - right: yabai -m window --swap east
lalt + ctrl + shift - up: yabai -m window --swap north
lalt + ctrl + shift - down: yabai -m window --swap south

# --- Rotate layout ---
lalt - r: yabai -m space --rotate 90

# --- Gaps/Padding toggle ---
ctrl + lalt - g: yabai -m space --toggle padding; yabai -m space --toggle gap

# --- Create new workspace and move focused window there (Hypr-like spawn) ---
lalt + shift - n: bash -lc 'yabai -m space --create && idx="$(yabai -m query --spaces --display | jq -r '"'"'map(select(."native-fullscreen"==0))[-1].index'"'"')" && yabai -m window --space "$idx" && yabai -m space --focus "$idx"'

# --- Workspaces (Spaces) ---
# Navigate: SUPER+1..0
lalt - 1: ~/yabai-tahoe -m space --focus 1
lalt - 2: ~/yabai-tahoe -m space --focus 2
lalt - 3: ~/yabai-tahoe -m space --focus 3
lalt - 4: ~/yabai-tahoe -m space --focus 4
lalt - 5: yabai -m space --focus 5
lalt - 6: yabai -m space --focus 6
lalt - 7: yabai -m space --focus 7
lalt - 8: yabai -m space --focus 8
lalt - 9: yabai -m space --focus 9
# #### TAHOE WORKAROUND NO SA-YABAI - DISABLED, USING YABAI-TAHOE NOW
# # ctrl-1..4 to focus spaces 1..4 (triggered by Left Alt)
# lalt - 1 : osascript -e 'tell application "System Events" to keystroke "1" using control down'
# lalt - 2 : osascript -e 'tell application "System Events" to keystroke "2" using control down'
# lalt - 3 : osascript -e 'tell application "System Events" to keystroke "3" using control down'
# lalt - 4 : osascript -e 'tell application "System Events" to keystroke "4" using control down'
# ####


# Move (silent): SUPER+ALT+1..9  → use lalt+ctrl here
lalt + ctrl - 1: yabai -m window --space 1; yabai -m space 1 --layout bsp
lalt + ctrl - 2: yabai -m window --space 2; yabai -m space 2 --layout bsp
lalt + ctrl - 3: yabai -m window --space 3; yabai -m space 3 --layout bsp
lalt + ctrl - 4: yabai -m window --space 4; yabai -m space 4 --layout bsp
lalt + ctrl - 5: yabai -m window --space 5; yabai -m space 5 --layout bsp
lalt + ctrl - 6: yabai -m window --space 6; yabai -m space 6 --layout bsp
lalt + ctrl - 7: yabai -m window --space 7; yabai -m space 7 --layout bsp
lalt + ctrl - 8: yabai -m window --space 8; yabai -m space 8 --layout bsp
lalt + ctrl - 9: yabai -m window --space 9; yabai -m space 9 --layout bsp

# Move + follow: SUPER+SHIFT+1..9
lalt + shift - 1: yabai -m window --space 1; yabai -m space --focus 1
lalt + shift - 2: yabai -m window --space 2; yabai -m space --focus 2
lalt + shift - 3: yabai -m window --space 3; yabai -m space --focus 3
lalt + shift - 4: yabai -m window --space 4; yabai -m space --focus 4
lalt + shift - 5: yabai -m window --space 5; yabai -m space --focus 5
lalt + shift - 6: yabai -m window --space 6; yabai -m space --focus 6
lalt + shift - 7: yabai -m window --space 7; yabai -m space --focus 7
lalt + shift - 8: yabai -m window --space 8; yabai -m space --focus 8
lalt + shift - 9: yabai -m window --space 9; yabai -m space --focus 9

# Move window to next/previous relative space (SUPER+ALT+CTRL+Right/Left)
lalt + ctrl + cmd - right: yabai -m window --space next; yabai -m space --focus next
lalt + ctrl + cmd - left: yabai -m window --space prev;  yabai -m space --focus prev

# --- Displays (optional; uncomment if needed) ---
# lalt + shift - . : yabai -m window --display next;     yabai -m display --focus next
# lalt + shift - , : yabai -m window --display previous; yabai -m display --focus previous

# --- Apps / Launchers ---
lalt - t: open -n -a "Ghostty" || open -n -a "kitty" || open -n -a "Terminal"
lalt - e: open -a "Finder"
lalt - c: open -na "Visual Studio Code"
lalt - b: open -a "Firefox"
ctrl + shift - escape: open -a "Activity Monitor"

# --- Spotlight ---
lalt - a: osascript -e 'tell application "System Events" to keystroke space using {command down}'
lalt + shift - e: open -a "Finder"; osascript -e 'delay 0.1' -e 'tell application "System Events" to keystroke "f" using {command down}'
lalt - v: osascript -e 'tell application "System Events" to keystroke "v" using {command down, shift down}'
lalt + shift - v: open -a "Maccy"

# --- Balance windows (Hypr convenience) ---
lalt + shift - 0: yabai -m space --balance
